<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:shiro = "http://www.pollix.at/thymeleaf/shiro"
	th:replace="~{fragments/layout :: layout (~{::body},'db')}" 
>
<head>

</head>
<body>
	<form class="form-signin" action="/editsave" method="post" id="form_sign">
	
	<div id="cover" class="cover"></div>
      
		<!-- 签名框在此，先隐藏 -->
<div id="signature-pad" class="signature-pad">
    <div class="signature-pad--body">
      <canvas></canvas>
    </div>
    <div class="signature-pad--footer">
      <div class="description">Sign above</div>

      <div class="signature-pad--actions">
        <div>
          <button type="button" class="button clear" data-action="clear">Clear</button>
          <button type="button" class="button" data-action="change-color">Change color</button>
          <button type="button" class="button" data-action="undo">Undo</button>
        </div>
        <div>
        
          <button id="btnplayno" type="button" class="button save" data-action="save-img">签字</button>
        </div>
      </div>
    </div>
</div>
		<button class="btn btn-lg btn-primary btn-block btn-signin" id="save">保存</button>
		<button type="button"  id="signname" class="btn btn-lg btn-primary btn-block btn-signin">显示签名板</button>

	</form>
<script type="text/javascript"> 
$("#save").bind("click",function() {
	var dataURL = signaturePad.toDataURL("image/jpeg");
	var blob = dataURLToBlob(dataURL);
	var formData = new FormData($("#form_sign")[0]);
	formData.append("blob", blob);
    $.ajax({
        url : '/jpgsave', // 自行按需配置好完整的url，包括ip和端口号  
        type : 'POST',  
        data : formData,  
        async : false,  
        cache : false,  
        contentType : false,  
        processData : false,  
        success : function(returndata) {  
            alert("success");  
        },  
        error : function(returndata) {  
            alert("error");  
        }  
    });  
	window.location.href="/editsave";
});
</script>

<script type="text/javascript"> 

//页面加载先隐藏幕布和签名板
$(document).ready(function(){
	$(".signature-pad").hide();
	$(".cover").hide();
	$(".cover").click(function(){
		$(".signature-pad").hide();
		$(this).hide();
	});
})
//点击后两个显示
$("#signname").bind("click",function() {
	$(".signature-pad").show();
	$(".cover").show();
});
//签字后隐藏幕布
$("#btnplayno").bind("click",function() {
	$(".cover").hide();
});


</script> 
<script src="js/signature_pad.js"></script>
<script src="js/app.js"></script>
</body>

</html>
